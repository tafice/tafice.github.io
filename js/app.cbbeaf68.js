(function(e){function t(t){for(var s,n,o=t[0],l=t[1],c=t[2],u=0,v=[];u<o.length;u++)n=o[u],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&v.push(r[n][0]),r[n]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);d&&d(t);while(v.length)v.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],s=!0,o=1;o<a.length;o++){var l=a[o];0!==r[l]&&(s=!1)}s&&(i.splice(t--,1),e=n(n.s=a[0]))}return e}var s={},r={app:0},i=[];function n(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=s,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(a,s,function(t){return e[t]}.bind(null,s));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var d=l;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0466":function(e,t,a){e.exports=a.p+"img/header_nier.98aef2c2.jpg"},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("0cdd");var s=a("2b0e"),r=a("2f62"),i=a("5f5b");a("ab8b"),a("2dd8");s["default"].use(i["a"]);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-app",["nier"===e.$store.state.currentMode?s("v-app-bar",{attrs:{app:"",absolute:"",dark:"","shrink-on-scroll":"",src:a("0466"),height:"200px"},scopedSlots:e._u([{key:"img",fn:function(t){var a=t.props;return[s("v-img",e._b({},"v-img",a,!1))]}}],null,!1,4250755206)},[s("v-toolbar-title",[!0===e.$store.state.canGoBack?s("v-btn",{attrs:{icon:"",color:"white"},on:{click:function(t){return e.$router.go(-1)}}},[s("v-icon",[e._v("mdi-arrow-left")])],1):e._e(),s("span",{staticClass:"ml-2"},[e._v("尼尔 人工生命 翻译工程")])],1)],1):e._e(),"kuon"===e.$store.state.currentMode?s("v-app-bar",{attrs:{app:"",absolute:"",dark:"","shrink-on-scroll":"",src:a("d03a"),height:"200px"},scopedSlots:e._u([{key:"img",fn:function(t){var a=t.props;return[s("v-img",e._b({},"v-img",a,!1))]}}],null,!1,4250755206)},[s("v-toolbar-title",[e._v("九怨 翻译工程")])],1):e._e(),s("v-content",[s("router-view")],1)],1)},o=[],l={name:"App",components:{},data:function(){return{}}},c=l,d=a("2877"),u=a("6544"),v=a.n(u),m=a("7496"),p=a("40dc"),f=a("8336"),h=a("a75b"),g=a("132d"),b=a("adda"),x=a("2a7f"),T=Object(d["a"])(c,n,o,!1,null,null,null),k=T.exports;v()(T,{VApp:m["a"],VAppBar:p["a"],VBtn:f["a"],VContent:h["a"],VIcon:g["a"],VImg:b["a"],VToolbarTitle:x["a"]});a("f9e3");var _=a("f309");s["default"].use(_["a"]);var y=new _["a"]({}),C=a("8c4f"),w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"3"}},[a("v-card",{attrs:{height:"150px"}},[a("v-card-title",[e._v("在线服务状态")]),a("v-card-text",[e.network?[a("v-icon",{attrs:{small:"",color:"green"}},[e._v("mdi-circle")]),a("span",{staticClass:"ml-2 text-justify"},[e._v("正常")])]:[a("v-icon",{attrs:{small:"",color:"red"}},[e._v("mdi-circle")]),a("span",{staticClass:"ml-2 text-justify"},[e._v("失败")])],a("br"),a("span",{staticClass:"mt-2 text-justify"},[e._v("本地版本： "+e._s(e.$config.clientVersion))]),a("br"),e.network?a("span",{staticClass:"mt-2 text-justify"},[e._v("服务器版本： "+e._s(e.$config.serverVersion))]):e._e()],2)],1)],1),a("v-col",{attrs:{cols:"3"}},[a("v-card",{attrs:{height:"150px"},on:{click:e.goToTranslate}},[a("v-card-title",[e._v("翻译")]),a("v-card-text",[a("v-icon",{attrs:{large:""}},[e._v("mdi-translate")])],1)],1)],1),a("v-col",{attrs:{cols:"3"}},[a("v-card",{attrs:{height:"150px"},on:{click:e.goToMerge}},[a("v-card-title",[e._v("合并")]),a("v-card-text",[a("v-icon",{attrs:{large:""}},[e._v("mdi-merge")])],1)],1)],1),a("v-col",{attrs:{cols:"3"}},[a("v-card",{attrs:{height:"150px"},on:{click:e.goToExport}},[a("v-card-title",[e._v("导出")]),a("v-card-text",[a("v-icon",{attrs:{large:""}},[e._v("mdi-export")])],1)],1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:"3"}},[a("v-card",{attrs:{height:"150px"},on:{click:e.goToCompare}},[a("v-card-title",[e._v("重复消除")]),a("v-card-text",[a("v-icon",{attrs:{large:""}},[e._v("mdi-merge")])],1)],1)],1),a("v-col",{attrs:{cols:"3"}},[a("v-card",{attrs:{height:"150px"},on:{click:e.goToNewIssue}},[a("v-card-title",[e._v("提出问题")]),a("v-card-text",[a("v-icon",{attrs:{large:""}},[e._v("mdi-frequently-asked-questions")])],1)],1)],1),a("v-col",{attrs:{cols:"3"}},[a("v-card",{attrs:{height:"150px"},on:{click:e.goToIssueList}},[a("v-card-title",[e._v("问题列表")]),a("v-card-text",[a("v-icon",{attrs:{large:""}},[e._v("mdi-bug")])],1)],1)],1),a("v-col",{attrs:{cols:"3"}},[a("v-card",{attrs:{height:"150px"},on:{click:e.goToNewCompare}},[a("v-card-title",[e._v("新翻译对照")]),a("v-card-text",[a("v-icon",{attrs:{large:""}},[e._v("mdi-translate")])],1)],1)],1)],1),e._e()],1)},I=[],j={data:function(){return{network:!1}},mounted:function(){var e=this;this.$store.commit("setCanGoBack",!1),this.$api.getConfig().then((function(t){0===t.code&&(e.$config.clientVersion<t.data.clientVersion&&window.location.reload(),e.$config.backupInterval=t.data.backupInterval,e.$config.serverVersion=t.data.serverVersion)})),this.$api.checkOnlineService().then((function(t){0===t.code&&(e.network=!0)}))},methods:{goToTranslate:function(){this.$router.push("/trans")},goToMerge:function(){this.$router.push("/merge")},goToExport:function(){this.$router.push("/export")},goToNewIssue:function(){this.$router.push("/issues")},goToIssueList:function(){this.$router.push("/issueList")},goToCompare:function(){this.$router.push("/compare")},goToNewCompare:function(){this.$router.push("/newCompare")}}},V=j,M=a("b0af"),P=a("99d9"),N=a("62ad"),z=a("a523"),L=a("8e36"),A=a("0fd9"),B=a("e0c7"),F=Object(d["a"])(V,w,I,!1,null,null,null),$=F.exports;v()(F,{VCard:M["a"],VCardText:P["c"],VCardTitle:P["d"],VCol:N["a"],VContainer:z["a"],VIcon:g["a"],VProgressLinear:L["a"],VRow:A["a"],VSubheader:B["a"]});var W=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",[a("v-col",[a("v-card",{staticClass:"d-block"},[a("v-tabs",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tab",[e._v("文件")]),e.loaded?a("v-tab",[e._v("页面")]):e._e(),e.loaded?a("v-tab",[e._v("搜索")]):e._e(),e.loaded?a("v-tab",[e._v("其他")]):e._e()],1),a("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tab-item",[a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("input",{attrs:{id:"file-input",type:"file",hidden:""}}),a("v-btn",{attrs:{color:"primary"},on:{click:e.loadProject}},[e._v(e._s(e.openText))]),a("v-btn",{staticClass:"ml-2",attrs:{color:"success",disabled:!e.loaded},on:{click:e.saveProject}},[e._v("保存")]),e.loaded?[a("span",{staticClass:"ml-4"},[e._v("文件名： "+e._s(e.filename))]),a("span",{staticClass:"ml-2"},[e._v("类型： "+e._s(e.project.spec))]),a("span",{staticClass:"ml-2"},[e._v("标识： "+e._s(e.project.line))]),a("span",{staticClass:"ml-2"},[e._v("总量： "+e._s(e.project.total))]),a("span",{staticClass:"ml-2"},[e._v("已完成： "+e._s(e.progress))])]:[a("span",{staticClass:"ml-4"},[e._v("说明：选择工程文件 *.json。翻译完成后记得保存！")])]],2)],1)],1),e.loaded?a("v-tab-item",[a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("v-row",[a("v-col",[a("v-text-field",{attrs:{type:"text",label:"快速跳转",placeholder:"#1234"},on:{keyup:e.quickJump},model:{value:e.jump,callback:function(t){e.jump=t},expression:"jump"}})],1),a("v-col",[a("v-select",{attrs:{items:e.sizePreset,label:"分页数量"},on:{change:e.sizeChange}})],1)],1)],1)],1)],1):e._e(),e.loaded?a("v-tab-item",[a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("v-row",[a("v-col",[a("v-text-field",{attrs:{type:"text",label:"原文搜索",placeholder:""},on:{keyup:e.search},model:{value:e.searchWord,callback:function(t){e.searchWord=t},expression:"searchWord"}})],1),a("v-col",[a("v-text-field",{attrs:{type:"text",label:"译文搜索",placeholder:""},on:{keyup:e.searchTrans},model:{value:e.searchWordTrans,callback:function(t){e.searchWordTrans=t},expression:"searchWordTrans"}})],1),a("v-col",{attrs:{cols:"2"}},[a("v-switch",{attrs:{label:"模糊搜索"},model:{value:e.searchFuzzy,callback:function(t){e.searchFuzzy=t},expression:"searchFuzzy"}})],1),a("v-col",[a("v-btn",{staticClass:"ml-2 mt-2",attrs:{color:"primary"},on:{click:e.clearSearch}},[e._v("清空")])],1)],1)],1)],1)],1):e._e(),e.loaded?a("v-tab-item",[a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("v-row",[a("v-col",[a("v-switch",{attrs:{label:"自动备份至服务器"},model:{value:e.autoBackup,callback:function(t){e.autoBackup=t},expression:"autoBackup"}})],1),a("v-col",[a("v-switch",{attrs:{label:"消除空行"},model:{value:e.avoidEmptyLine,callback:function(t){e.avoidEmptyLine=t},expression:"avoidEmptyLine"}})],1)],1)],1)],1)],1):e._e()],1)],1)],1)],1),e.loaded?a("v-row",{attrs:{id:"work-row"}},[a("v-col",[a("v-card",[a("v-card-text",[a("v-pagination",{attrs:{length:e.pageLength,"total-visible":"10",circle:""},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}}),"INW"===e.project.spec?e._l(e.pageItem,(function(t){return a("div",{key:t.Id},[a("v-row",{attrs:{"no-gutters":"",id:"item-"+t.Id}},[a("v-col",[a("span",[e._v("#"+e._s(t.Id))])])],1),a("v-row",[a("v-col",{attrs:{cols:"2"}},[a("v-textarea",{attrs:{label:"原文",readonly:"","no-resize":""},model:{value:t.Text,callback:function(a){e.$set(t,"Text",a)},expression:"item.Text"}})],1),a("v-col",{attrs:{cols:"2"}},[a("v-textarea",{attrs:{label:"原文2",readonly:"","no-resize":""},model:{value:t.Text2,callback:function(a){e.$set(t,"Text2",a)},expression:"item.Text2"}})],1),a("v-col",{attrs:{cols:"2"}},[a("v-textarea",{attrs:{label:"翻译",value:t.Translated},on:{blur:function(a){return e.onTranslatedBlur(a,t,!1)}}})],1),a("v-col",{attrs:{cols:"2"}},[a("v-textarea",{attrs:{label:"翻译2",value:t.Translated2},on:{blur:function(a){return e.onTranslatedBlur(a,t,!0)}}})],1),a("v-col",{attrs:{cols:"2"}},[a("v-textarea",{attrs:{label:"注释"},model:{value:t.Comment,callback:function(a){e.$set(t,"Comment",a)},expression:"item.Comment"}})],1),a("v-col",{attrs:{cols:"2"}},[a("div",[a("v-btn",{attrs:{text:""},on:{click:function(a){return e.baiduclick(t.Id)}}},[e._v("百度翻译")]),a("v-btn",{attrs:{text:""},on:{click:function(a){return e.googleclick(t.Id)}}},[e._v("谷歌翻译")])],1)])],1)],1)})):e._l(e.pageItem,(function(t){return a("div",{key:t.Id},[a("v-row",{attrs:{"no-gutters":"",id:"item-"+t.Id}},[a("v-col",[a("span",[e._v("#"+e._s(t.Id))])])],1),a("v-row",[a("v-col",{attrs:{cols:"4"}},["TKD"===e.project.spec||"RAW"===e.project.spec?a("v-textarea",{attrs:{label:e.getTalkerName(t)+"：",readonly:"","no-resize":"","persistent-hint":!0},model:{value:t.Text,callback:function(a){e.$set(t,"Text",a)},expression:"item.Text"}}):a("v-textarea",{attrs:{label:"原文",readonly:"","no-resize":""},model:{value:t.Text,callback:function(a){e.$set(t,"Text",a)},expression:"item.Text"}})],1),a("v-col",{attrs:{cols:"4"}},[a("v-textarea",{attrs:{label:"翻译",value:t.Translated},on:{blur:function(a){return e.onTranslatedBlur(a,t,!1)}}})],1),a("v-col",{attrs:{cols:"2"}},[a("v-textarea",{attrs:{label:"注释"},model:{value:t.Comment,callback:function(a){e.$set(t,"Comment",a)},expression:"item.Comment"}})],1),a("v-col",{attrs:{cols:"2"}},[a("div",[a("v-btn",{attrs:{text:""},on:{click:function(a){return e.baiduclick(t.Id)}}},[e._v("百度翻译")]),a("v-btn",{attrs:{text:""},on:{click:function(a){return e.googleclick(t.Id)}}},[e._v("谷歌翻译")])],1)])],1)],1)})),a("v-pagination",{attrs:{length:e.pageLength,"total-visible":"10",circle:""},on:{input:function(t){return e.$vuetify.goTo("#work-row")}},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],2)],1)],1)],1):e._e(),a("v-dialog",{attrs:{width:"600px"},model:{value:e.alert,callback:function(t){e.alert=t},expression:"alert"}},[a("v-card",[a("v-card-title",{staticClass:"subtitle"},[e._v("注意")]),a("v-card-text",[e._v(e._s(e.alertMessage))]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"red"},on:{click:function(t){e.alert=!1,e.alertMessage=""}}},[e._v("确定")])],1)],1)],1),a("v-snackbar",{attrs:{timeout:e.backupNotifyTimeout},model:{value:e.backupNotify,callback:function(t){e.backupNotify=t},expression:"backupNotify"}},[e._v(" "+e._s(e.backupNotifyMessage)+" "),a("v-btn",{attrs:{color:"blue",text:""},on:{click:function(t){e.backupNotify=!1}}},[e._v("关闭")])],1)],1)},O=[],E=(a("99af"),a("4de4"),a("7db0"),a("4160"),a("c975"),a("a15b"),a("fb6a"),a("b0c0"),a("4d63"),a("ac1f"),a("25f0"),a("5319"),a("1276"),a("159b"),a("caad"),{arrayEqual:function(e,t){if(e.length!==t.length)return!1;for(var a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0},checkProject:function(e){var t=["TKD","TXD","RAW","INW","CAP","FMG","V122_TALK"];return t.includes(e)},objectToBlob:function(e){var t=JSON.stringify(e),a=new Blob([t],{type:"application/json;charset=utf-8"});return a}}),S=a("21a6"),R=a.n(S),D=a("b9b9"),G=a.n(D),K={data:function(){return{loaded:!1,filename:"",alert:!1,alertMessage:"",backupNotify:!1,backupNotifyMessage:"",backupNotifyTimeout:2e3,avoidEmptyLine:!0,project:{},extraData:{},tab:0,page:1,sizePreset:[30,50,80,100],size:50,jump:0,total:0,translate:0,autoBackup:!0,autoBackupTimer:{},talkerNameMap:[{id:"1",name:"黑之书"},{id:"2",name:"尼尔"},{id:"3",name:"尼尔"},{id:"4",name:"尼尔"},{id:"5",name:"悠娜"},{id:"6",name:"悠娜"},{id:"7",name:"悠娜"},{id:"8",name:"村民"},{id:"9",name:"卫兵"},{id:"10",name:"道具店"},{id:"11",name:"材料店"},{id:"12",name:"花店"},{id:"13",name:"食品店"},{id:"14",name:"武器店"},{id:"15",name:"渔具店"},{id:"16",name:"酒馆"},{id:"17",name:"村民"},{id:"18",name:"村民"},{id:"19",name:"路人"},{id:"20",name:"鱼店"},{id:"21",name:"占卜师"},{id:"22",name:"村民"},{id:"23",name:"迪瓦菈"},{id:"24",name:"波波菈"},{id:"25",name:"？？？"},{id:"26",name:"白之书"},{id:"27",name:"村长"},{id:"28",name:"凯宁"},{id:"29",name:"魔物"},{id:"30",name:"魔物"},{id:"31",name:"魔物"},{id:"32",name:"魔物"},{id:"33",name:"魔物"},{id:"34",name:"管家"},{id:"35",name:"艾米尔"},{id:"36",name:"弟弟"},{id:"37",name:"弟弟"},{id:"38",name:"兄长"},{id:"39",name:"防御系统"},{id:"40",name:"老婆婆"},{id:"41",name:"邮递员"},{id:"42",name:"菲雅"},{id:"43",name:"面具副官"},{id:"44",name:"面具王子"},{id:"45",name:"面具之王"},{id:"46",name:"面具的住民"},{id:"47",name:"面具士兵"},{id:"48",name:"奇怪的商店"},{id:"49",name:"面具食材店"},{id:"50",name:"面具材料店"},{id:"51",name:"面具武器店"},{id:"52",name:"面具道具店"},{id:"53",name:"男村民"},{id:"54",name:"女村民"},{id:"55",name:"魔物小孩"},{id:"56",name:"魔物母亲"},{id:"57",name:"Ｐ３３"},{id:"58",name:"杜兰"},{id:"59",name:"格雷特"},{id:"60",name:"狼头领"},{id:"61",name:"狼"},{id:"62",name:"狼崽"},{id:"63",name:"幼犬"},{id:"64",name:"老人"},{id:"65",name:"姐姐"},{id:"66",name:"小鸟"},{id:"67",name:"魔王"},{id:"68",name:"迪瓦菈・波波菈"},{id:"69",name:"盗贼"},{id:"70",name:"选项"},{id:"71",name:"小孩"},{id:"72",name:"面具小孩"},{id:"73",name:"邮局工作人员"},{id:"74",name:"村民"},{id:"108",name:"村民"},{id:"110",name:"道具店"},{id:"111",name:"材料店"},{id:"112",name:"花店"},{id:"113",name:"食品店"},{id:"114",name:"武器店"},{id:"115",name:"渔具店"},{id:"116",name:"酒馆"},{id:"118",name:"村民"},{id:"119",name:"路人"},{id:"120",name:"鱼店"},{id:"127",name:"村长"},{id:"129",name:"魔物"},{id:"132",name:"魔物"},{id:"146",name:"面具住民"},{id:"147",name:"面具士兵"},{id:"149",name:"面具食材店"},{id:"150",name:"面具材料店"},{id:"151",name:"面具武器店"},{id:"152",name:"面具道具店"},{id:"171",name:"小孩"},{id:"172",name:"面具小孩"}],searchWord:"",searchWordTrans:"",searchFlag:!1,searchTransFlag:!1,searchFuzzy:!0}},computed:{openText:function(){return this.loaded?"重新选择":"打开工程"},progress:function(){var e=0;return this.project.list.forEach((function(t){""!==t.Translated&&null!==t.Translated&&e++})),e},displayList:function(){var e=this,t=this.project.list;return this.avoidEmptyLine&&(t="INW"===this.project.spec?t.filter((function(e){return e.Text+e.Text2!==""})):t.filter((function(e){return""!==e.Text}))),this.searchFlag?t="INW"===this.project.spec?t.filter((function(t){return e.searchFuzzy?e.searchWordReg(e.searchWord).test(t.Text.concat(t.Text2)):t.Text.concat(t.Text2).indexOf(e.searchWord)>0})):t.filter((function(t){return e.searchFuzzy?e.searchWordReg(e.searchWord).test(t.Text):t.Text.indexOf(e.searchWord)>0})):this.searchTransFlag&&(t="INW"===this.project.spec?t.filter((function(t){return e.searchFuzzy?e.searchWordReg(e.searchWordTrans).test(t.Translated.concat(t.Translated2)):t.Translated.concat(t.Translated2).indexOf(e.searchWordTrans)>0})):t.filter((function(t){return e.searchFuzzy?e.searchWordReg(e.searchWordTrans).test(t.Translated):t.Translated.indexOf(e.searchWordTrans)>0}))),t},pageItem:function(){return this.displayList.slice((this.page-1)*this.size,(this.page-1)*this.size+this.size)},pageLength:function(){return Math.ceil(this.displayList.length/this.size)},getTalkerName:function(){return function(e){var t;return"TKD"===this.project.spec?(t=this.talkerNameMap.find((function(t){return t.id===e.EntryO})),t?t.name:e.EntryF):"RAW"===this.project.spec?(t=this.talkerNameMap.find((function(t){return t.id===e.EntryK})),t?t.name:e.EntryE):void 0}}},mounted:function(){this.$store.commit("setCanGoBack",!0),window.onbeforeunload=function(e){return e=e||window.event,e&&(e.returnValue="记得保存！"),"记得保存！"}},beforeDestroy:function(){clearInterval(this.autoBackupTimer)},beforeRouteLeave:function(e,t,a){var s=window.confirm("保存了吗？");s?a():a(!1)},methods:{quickJump:function(e){var t=this;if("Enter"===e.key){if(this.jump>=this.project.total)return this.alert=!0,void(this.alertMessage="超过范围");for(var a=0;a<this.displayList.length;a++)if(this.displayList[a].Id==this.jump)return this.page=Math.ceil((+a+1)/this.size),void this.$nextTick((function(){t.$vuetify.goTo("#item-"+t.jump)}));this.alert=!0,this.alertMessage="超过范围"}},search:function(e){"Enter"===e.key&&(this.searchFlag=!0)},searchTrans:function(e){"Enter"===e.key&&(this.searchTransFlag=!0)},clearSearch:function(){this.searchFlag=!1,this.searchTransFlag=!1},sizeChange:function(e){this.size=e},onTranslatedBlur:function(e,t,a){a?t.Translated2=e.target.value:t.Translated=e.target.value},loadProject:function(){var e=this,t=this,a=document.querySelector("#file-input");a.addEventListener("change",(function(){var s=a.files;if(0===s.length)e.alertMessage="没有选择文件！",e.alert=!0;else if(s.length>1)e.alertMessage="只能选择一个文件！",e.alert=!0;else{var r=s[0];e.filename=r.name;var i=new FileReader;i.onload=function(a){var s=a.target.result;if(s){var r=JSON.parse(s);if(!r)return t.alertMessage="这不是一个翻译工程文件！",void(t.alert=!0);if(!E.checkProject(r.spec))return t.alertMessage="这不是一个翻译工程文件！",void(t.alert=!0);t.project=r,t.checkMode(t.project.spec),t.page=1,t.loaded=!0,clearInterval(t.autoBackupTimer),t.autoBackupTimer=setInterval((function(){if(t.loaded&&t.autoBackup){var a=G()("yyyy-mm-dd_hh-MM-ss"),s=new File([E.objectToBlob(t.project)],e.filename.replace(".json","")+"-"+a+".json");t.$api.backup(s).then((function(e){0===e.code?(t.backupNotifyMessage="已经自动备份至服务器",t.backupNotify=!0):(t.backupNotifyMessage="备份失败！",t.backupNotify=!0)})).catch((function(){t.backupNotifyMessage="备份失败！",t.backupNotify=!0}))}}),60*e.$config.backupInterval*1e3)}},i.readAsText(r,"utf-8")}})),a.click()},checkMode:function(e){"FMG"===e?this.$store.commit("setCurrentMode","kuon"):this.$store.commit("setCurrentMode","nier")},saveProject:function(){var e=this.project;e.translated=this.progress;var t=G()("yyyy-mm-dd_hh-MM-ss");R.a.saveAs(E.objectToBlob(e),this.filename.replace(".json","")+"-"+t+".json")},googleclick:function(e){var t=encodeURI(this.project.list[e].Text),a="https://translate.google.cn/?hl=zh-CN#view=home&op=translate&sl=ja&tl=zh-CN&text=";window.open(a+t)},baiduclick:function(e){var t=encodeURI(this.project.list[e].Text),a="https://fanyi.baidu.com/#jp/zh/";window.open(a+t)},searchWordReg:function(e){return new RegExp("(.*)(".concat(e.split("").join(")(.*)("),")(.*)"),"i")}}},J=K,q=a("169a"),U=a("891e"),H=a("b974"),X=a("2db4"),Q=a("2fa4"),Y=a("b73d"),Z=a("71a3"),ee=a("c671"),te=a("fe57"),ae=a("aac8"),se=a("8654"),re=a("a844"),ie=Object(d["a"])(J,W,O,!1,null,null,null),ne=ie.exports;v()(ie,{VBtn:f["a"],VCard:M["a"],VCardActions:P["a"],VCardText:P["c"],VCardTitle:P["d"],VCol:N["a"],VContainer:z["a"],VDialog:q["a"],VPagination:U["a"],VRow:A["a"],VSelect:H["a"],VSnackbar:X["a"],VSpacer:Q["a"],VSwitch:Y["a"],VTab:Z["a"],VTabItem:ee["a"],VTabs:te["a"],VTabsItems:ae["a"],VTextField:se["a"],VTextarea:re["a"]});var oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",[a("v-col",[a("v-card",[a("v-card-title",[e._v("合并")]),a("v-card-text",[a("v-file-input",{attrs:{label:"工程A"},on:{change:e.fileInputchange}}),a("v-file-input",{attrs:{label:"工程B"},on:{change:e.fileInputchange}}),a("v-btn",{staticClass:"ml-2",attrs:{color:"primary",disabled:2!==e.projects.length||e.loaded},on:{click:e.compareProject}},[e._v("比较")]),a("v-btn",{staticClass:"ml-2",attrs:{color:"success",disabled:!e.canSave},on:{click:e.saveProject}},[e._v("导出")])],1)],1)],1)],1),e.loaded&&0!==e.diffItemIdxs.length?a("v-row",{attrs:{id:"work-row"}},[a("v-col",[a("v-card",[a("v-card-subtitle",[e._v("差异")]),a("v-card-text",[a("v-btn",{attrs:{text:""},on:{click:function(t){return e.comfirmAll("left")}}},[e._v("全部采用A")]),a("v-btn",{attrs:{text:""},on:{click:function(t){return e.comfirmAll("right")}}},[e._v("全部采用B")]),a("v-pagination",{attrs:{length:e.pageLength,"total-visible":"10",circle:""},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}}),"INW"===e.newProject.spec?e._l(e.pageItem,(function(t,s){return a("div",{key:t},[a("v-row",{attrs:{"no-gutters":"",dense:""}},[a("v-col",[a("span",[e._v("#"+e._s(t))])])],1),a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"1"}},[a("v-textarea",{attrs:{label:"原文1",readonly:"","no-resize":"",value:e.projects[0].list[t].Text}})],1),a("v-col",{attrs:{cols:"1"}},[a("v-textarea",{attrs:{label:"原文2",readonly:"","no-resize":"",value:e.projects[0].list[t].Text2}})],1),a("v-col",{attrs:{cols:"2"}},[a("v-textarea",{attrs:{label:"翻译A 1",readonly:"","no-resize":"",value:e.projects[0].list[t].Translated}})],1),a("v-col",{attrs:{cols:"2"}},[a("v-textarea",{attrs:{label:"翻译A 2",readonly:"","no-resize":"",value:e.projects[0].list[t].Translated2}})],1),a("v-col",{staticClass:"ma-2",attrs:{cols:"1"}},[a("div",[a("v-btn",{attrs:{text:""},on:{click:function(a){return e.comfirmChange("left",t,s)}}},[e._v("← 采用A")]),a("v-btn",{attrs:{text:""},on:{click:function(a){return e.comfirmChange("right",t,s)}}},[e._v("采用B →")])],1)]),a("v-col",{staticClass:"ml-2",attrs:{cols:"2"}},[a("v-textarea",{attrs:{label:"翻译B 1",readonly:"","no-resize":"",value:e.projects[1].list[t].Translated}})],1),a("v-col",{staticClass:"ml-2",attrs:{cols:"2"}},[a("v-textarea",{attrs:{label:"翻译B 2",readonly:"","no-resize":"",value:e.projects[1].list[t].Translated2}})],1)],1)],1)})):e._l(e.pageItem,(function(t,s){return a("div",{key:t},[a("v-row",{attrs:{"no-gutters":"",dense:""}},[a("v-col",[a("span",[e._v("#"+e._s(t))])])],1),a("v-row",[a("v-col",{attrs:{cols:"3"}},[a("v-textarea",{attrs:{label:"原文",readonly:"","no-resize":"",value:e.projects[0].list[t].Text}})],1),a("v-col",{attrs:{cols:"3"}},[a("v-textarea",{attrs:{label:"翻译A",readonly:"","no-resize":"",value:e.projects[0].list[t].Translated}})],1),a("v-col",{staticClass:"ma-2",attrs:{cols:"1"}},[a("div",[a("v-btn",{attrs:{text:""},on:{click:function(a){return e.comfirmChange("left",t,s)}}},[e._v("← 采用A")]),a("v-btn",{attrs:{text:""},on:{click:function(a){return e.comfirmChange("right",t,s)}}},[e._v("采用B →")])],1)]),a("v-col",{staticClass:"ml-2",attrs:{cols:"3"}},[a("v-textarea",{attrs:{label:"翻译B",readonly:"","no-resize":"",value:e.projects[1].list[t].Translated}})],1)],1)],1)})),a("v-pagination",{attrs:{length:e.pageLength,"total-visible":"10",circle:""},on:{input:function(t){return e.$vuetify.goTo("#work-row")}},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],2)],1)],1)],1):e._e(),a("v-dialog",{attrs:{width:"600px"},model:{value:e.alert,callback:function(t){e.alert=t},expression:"alert"}},[a("v-card",[a("v-card-title",{staticClass:"subtitle"},[e._v("注意")]),a("v-card-text",[e._v(e._s(e.alertMessage))]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"red"},on:{click:function(t){e.alert=!1,e.alertMessage=""}}},[e._v("确定")])],1)],1)],1)],1)},le=[],ce=(a("a434"),a("b64b"),{data:function(){return{loaded:!1,alert:!1,alertMessage:"",projects:[],diffItemIdxs:[],newProject:{},page:1,size:50}},computed:{canSave:function(){return!!this.loaded&&0===this.diffItemIdxs.length},pageItem:function(){return this.diffItemIdxs.slice((this.page-1)*this.size,(this.page-1)*this.size+this.size)},pageLength:function(){return Math.ceil(this.diffItemIdxs.length/this.size)}},mounted:function(){this.$store.commit("setCanGoBack",!0)},methods:{fileInputchange:function(e){if(""!==e){var t=this,a=new FileReader;a.onload=function(e){var a=e.target.result;if(a){var s=JSON.parse(a);if(!s)return t.alertMessage="文件不是翻译工程文件！",void(t.alert=!0);if(!E.checkProject(s.spec))return t.alertMessage="文件不是翻译工程文件！",void(t.alert=!0);t.projects.push(s)}},a.readAsText(e,"utf-8")}},compareProject:function(){var e=this.projects[0],t=this.projects[1],a=Object.keys(e.list[0]),s=Object.keys(t.list[0]);if(e.total!==t.total&&(this.alert=!0,this.alertMessage="不是同一种工程文件！",this.projects=[]),E.arrayEqual(a,s)){this.newProject=e;for(var r=0;r<e.list.length;r++)e.list[r].Translated!==t.list[r].Translated&&(""===e.list[r].Translated?this.newProject.list[r].Translated=t.list[r].Translated:""===t.list[r].Translated||this.diffItemIdxs.push(r));if("INW"===this.newProject.spec)for(var i=0;i<e.list.length;i++)e.list[i].Translated2!==t.list[i].Translated2&&(""===e.list[i].Translated2?this.newProject.list[i].Translated2=t.list[i].Translated2:""===t.list[i].Translated2||this.diffItemIdxs.push(i));this.loaded=!0}else this.alert=!0,this.alertMessage="不是同一种工程文件！",this.projects=[]},comfirmChange:function(e,t,a){"left"===e?(this.newProject.list[t].Translated=this.projects[0].list[t].Translated,"INW"===this.newProject.spec&&(this.newProject.list[t].Translated2=this.projects[0].list[t].Translated2),this.diffItemIdxs.splice(a,1)):"right"===e?(this.newProject.list[t].Translated=this.projects[1].list[t].Translated,"INW"===this.newProject.spec&&(this.newProject.list[t].Translated2=this.projects[1].list[t].Translated2),this.diffItemIdxs.splice(a,1)):(this.alert=!0,this.alertMessage="你做了什么？")},comfirmAll:function(e){if("left"===e){for(var t=0;t<this.diffItemIdxs.length;t++)this.newProject.list[this.diffItemIdxs[t]].Translated=this.projects[0].list[this.diffItemIdxs[t]].Translated;if("INW"===this.newProject.spec)for(var a=0;a<this.diffItemIdxs.length;a++)this.newProject.list[this.diffItemIdxs[a]].Translated2=this.projects[0].list[this.diffItemIdxs[a]].Translated2;this.diffItemIdxs=[]}else if("right"===e){for(var s=0;s<this.diffItemIdxs.length;s++)this.newProject.list[this.diffItemIdxs[s]].Translated=this.projects[1].list[this.diffItemIdxs[s]].Translated;if("INW"===this.newProject.spec)for(var r=0;r<this.diffItemIdxs.length;r++)this.newProject.list[this.diffItemIdxs[r]].Translated2=this.projects[1].list[this.diffItemIdxs[r]].Translated2;this.diffItemIdxs=[]}else this.alert=!0,this.alertMessage="你做了什么？"},saveProject:function(){var e=0;this.newProject.list.forEach((function(t){""!==t.Translated&&null!==t.Translated&&e++})),this.newProject.translated=e;var t=G()("yyyy-mm-dd_hh-MM-ss");R.a.saveAs(E.objectToBlob(this.newProject),t+"-merged-.json")}}}),de=ce,ue=a("23a7"),ve=Object(d["a"])(de,oe,le,!1,null,null,null),me=ve.exports;v()(ve,{VBtn:f["a"],VCard:M["a"],VCardActions:P["a"],VCardSubtitle:P["b"],VCardText:P["c"],VCardTitle:P["d"],VCol:N["a"],VContainer:z["a"],VDialog:q["a"],VFileInput:ue["a"],VPagination:U["a"],VRow:A["a"],VSpacer:Q["a"],VTextarea:re["a"]});var pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",[a("v-col",[a("v-card",[a("v-card-title",[e._v("Nier 导出")]),a("v-card-text",[a("v-file-input",{attrs:{label:"工程"},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}}),a("v-row",[a("v-col",[a("v-checkbox",{attrs:{label:"测试导出"},model:{value:e.debug,callback:function(t){e.debug=t},expression:"debug"}})],1),a("v-col",[a("v-checkbox",{attrs:{label:"美版"},model:{value:e.english,callback:function(t){e.english=t},expression:"english"}})],1),a("v-col",[a("v-radio-group",{attrs:{row:""},model:{value:e.lang,callback:function(t){e.lang=t},expression:"lang"}},[a("v-radio",{attrs:{label:"简体中文",value:"cn"}}),a("v-radio",{attrs:{label:"台湾繁中",value:"tw"}}),a("v-radio",{attrs:{label:"香港繁中",value:"hk"}})],1)],1)],1),a("v-btn",{staticClass:"ml-2",attrs:{color:"success",disabled:e.file&&0===e.file.length||!e.file},on:{click:e.saveProject}},[e._v("导出")])],1)],1)],1)],1),a("v-dialog",{attrs:{width:"600px"},model:{value:e.alert,callback:function(t){e.alert=t},expression:"alert"}},[a("v-card",[a("v-card-title",{staticClass:"subtitle"},[e._v("注意")]),a("v-card-text",[e._v(e._s(e.alertMessage))]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"red"},on:{click:function(t){e.alert=!1,e.alertMessage=""}}},[e._v("确定")])],1)],1)],1)],1)},fe=[],he=(a("466d"),a("53ca")),ge={data:function(){return{loaded:!1,alert:!1,alertMessage:"",file:[],debug:!1,english:!1,lang:"cn"}},mounted:function(){this.$store.commit("setCanGoBack",!0)},methods:{saveProject:function(){var e=this;this.file?this.$api.export(this.file,{debug:this.debug,lang:this.lang,english:this.english}).then((function(t){var a=t.data;if("object"===Object(he["a"])(a))e.alertMessage=t.data.msg,e.alert=!0;else{var s=t.headers["content-disposition"],r="output";if(s){var i=s.match(/filename="(.+)"/);2===i.length&&(r=i[1])}var n=new Blob([a],{type:t.headers["content-type"]});R.a.saveAs(n,r)}})):(this.alertMessage="没有选择文件！",this.alert=!0)}}},be=ge,xe=a("ac7c"),Te=a("67b6"),ke=a("43a6"),_e=Object(d["a"])(be,pe,fe,!1,null,null,null),ye=_e.exports;v()(_e,{VBtn:f["a"],VCard:M["a"],VCardActions:P["a"],VCardText:P["c"],VCardTitle:P["d"],VCheckbox:xe["a"],VCol:N["a"],VContainer:z["a"],VDialog:q["a"],VFileInput:ue["a"],VRadio:Te["a"],VRadioGroup:ke["a"],VRow:A["a"],VSpacer:Q["a"]});var Ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",[a("v-col",[a("v-card",[a("v-card-title",[e._v("提出新问题")]),a("v-card-text",[a("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{attrs:{label:"标题",required:"",rules:[function(e){return!!e||"必须填写"}]},model:{value:e.issueTitle,callback:function(t){e.issueTitle=t},expression:"issueTitle"}}),a("v-select",{attrs:{label:"标签",items:e.tagItems},model:{value:e.issueTag,callback:function(t){e.issueTag=t},expression:"issueTag"}}),a("v-row",[a("v-col",[a("v-select",{attrs:{items:e.lineItems,label:"标识"},model:{value:e.issueLine,callback:function(t){e.issueLine=t},expression:"issueLine"}})],1),a("v-col",[a("v-text-field",{attrs:{label:"位置",rules:[function(e){return!!e||"必须填写"}]},model:{value:e.issueIndex,callback:function(t){e.issueIndex=t},expression:"issueIndex"}})],1)],1),a("v-textarea",{attrs:{label:"描述",required:"",rules:[function(e){return!!e||"必须填写"}]},model:{value:e.issueContent,callback:function(t){e.issueContent=t},expression:"issueContent"}}),a("v-select",{attrs:{label:"优先级",items:e.priorityItems},model:{value:e.issuePriority,callback:function(t){e.issuePriority=t},expression:"issuePriority"}}),a("v-file-input",{attrs:{placeholder:"选择问题图片",multiple:"",chips:"",label:"图片附件",accept:"image/png, image/jpeg, image/bmp, image/gif, image/webp"},model:{value:e.issueFiles,callback:function(t){e.issueFiles=t},expression:"issueFiles"}})],1),a("v-btn",{attrs:{color:"success",disabled:!e.valid},on:{click:function(t){return e.onSubmitClick()}}},[e._v("提交")])],1)],1)],1)],1),a("v-dialog",{attrs:{width:"600px"},model:{value:e.alert,callback:function(t){e.alert=t},expression:"alert"}},[a("v-card",[a("v-card-title",{staticClass:"subtitle"},[e._v("注意")]),a("v-card-text",[e._v(e._s(e.alertMessage))]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"red"},on:{click:function(t){e.alert=!1,e.alertMessage=""}}},[e._v("确定")])],1)],1)],1)],1)},we=[],Ie={data:function(){return{loaded:!1,alert:!1,alertMessage:"",valid:!0,tagItems:[{text:"尼尔人工生命",value:"nier"},{text:"九怨",value:"kuon"}],priorityItems:[{text:"低",value:"0"},{text:"普通",value:"1"},{text:"高",value:"2"},{text:"紧急",value:"3"}],lineItems:[{text:"TALK_A",value:"TA"},{text:"TALK_B",value:"TB"},{text:"TALK_C",value:"TC"},{text:"TALK_COMMON",value:"TCOMM"},{text:"TALK_D",value:"TD"},{text:"RADIO_A",value:"RA"},{text:"RADIO_B",value:"RB"},{text:"INFOWINDOW",value:"INFO"},{text:"CAPTION",value:"CAP"},{text:"EVENT",value:"EVENT"},{text:"FMG",value:"FMG"}],issueTitle:"",issueLine:"TA",issueIndex:"",issueContent:"",issueTag:"nier",issuePriority:"1",issueFiles:[]}},mounted:function(){this.$store.commit("setCanGoBack",!0)},methods:{resetForm:function(){this.issueTitle="",this.issueLine="TA",this.issueIndex="",this.issueContent="",this.issueTag="nier",this.issuePriority="1",this.issueFiles=[]},onSubmitClick:function(){var e=this;this.$api.createIssue({title:this.issueTitle,tag:this.issueTag,line:this.issueLine,index:this.issueIndex,priority:this.issuePriority,content:this.issueContent,files:this.issueFiles}).then((function(t){0===t.code?(e.alertMessage="添加成功",e.alert=!0,e.resetForm()):(e.alertMessage="失败",e.alert=!0)})).catch((function(){e.alertMessage="失败",e.alert=!0}))}}},je=Ie,Ve=a("4bd4"),Me=Object(d["a"])(je,Ce,we,!1,null,null,null),Pe=Me.exports;v()(Me,{VBtn:f["a"],VCard:M["a"],VCardActions:P["a"],VCardText:P["c"],VCardTitle:P["d"],VCol:N["a"],VContainer:z["a"],VDialog:q["a"],VFileInput:ue["a"],VForm:Ve["a"],VRow:A["a"],VSelect:H["a"],VSpacer:Q["a"],VTextField:se["a"],VTextarea:re["a"]});var Ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",[a("v-col",[a("v-card",[a("v-card-title",[e._v("问题列表")]),a("v-card-text",[a("v-tabs",{on:{change:e.onTabChange}},[a("v-tab",{attrs:{value:"0"}},[e._v("未解决")]),a("v-tab",{attrs:{value:"1"}},[e._v("已关闭")]),a("v-tab",{attrs:{value:"2"}},[e._v("疑问")])],1),a("v-list",{attrs:{"three-line":""}},[e._l(e.issues,(function(t){return[a("v-list-item",{key:t.id,on:{click:function(a){return e.onIssueItemClick(t.id)}}},[a("v-list-item-icon",["0"===t.priority?a("v-icon",{attrs:{color:"blue"}},[e._v("mdi-circle")]):"1"===t.priority?a("v-icon",{attrs:{color:"yellow"}},[e._v("mdi-circle")]):"2"===t.priority?a("v-icon",{attrs:{color:"orange"}},[e._v("mdi-circle")]):"3"===t.priority?a("v-icon",{attrs:{color:"red"}},[e._v("mdi-circle")]):e._e()],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{innerHTML:e._s(t.title)}}),a("v-list-item-subtitle",{domProps:{innerHTML:e._s(e.subtitle(t.content))}})],1),a("v-list-item-icon",[0===t.status?a("v-icon",{attrs:{color:"red"}},[e._v("mdi-close")]):1===t.status?a("v-icon",{attrs:{color:"green"}},[e._v("mdi-check")]):2===t.status?a("v-icon",{attrs:{color:"black"}},[e._v("mdi-help")]):e._e()],1)],1)]}))],2)],1)],1)],1)],1),a("v-dialog",{attrs:{width:"600px"},model:{value:e.alert,callback:function(t){e.alert=t},expression:"alert"}},[a("v-card",[a("v-card-title",{staticClass:"subtitle"},[e._v("注意")]),a("v-card-text",[e._v(e._s(e.alertMessage))]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"red"},on:{click:function(t){e.alert=!1,e.alertMessage=""}}},[e._v("确定")])],1)],1)],1)],1)},ze=[],Le={data:function(){return{loaded:!1,alert:!1,alertMessage:"",page:0,limit:10,status:1,issues:[]}},computed:{subtitle:function(){return function(e){return e&&e.length>40?e.substring(0,40)+"...":e}}},mounted:function(){this.$store.commit("setCanGoBack",!0)},methods:{loadList:function(){var e=this;this.$api.issueList(this.page,this.limit,this.status).then((function(t){0===t.code&&(e.issues=t.data)}))},onTabChange:function(e){this.status=e,this.loadList()},onIssueItemClick:function(e){this.$router.push({name:"IssueDetailPage",params:{id:e}})}}},Ae=Le,Be=a("8860"),Fe=a("da13"),$e=a("5d23"),We=a("34c3"),Oe=Object(d["a"])(Ae,Ne,ze,!1,null,null,null),Ee=Oe.exports;v()(Oe,{VBtn:f["a"],VCard:M["a"],VCardActions:P["a"],VCardText:P["c"],VCardTitle:P["d"],VCol:N["a"],VContainer:z["a"],VDialog:q["a"],VIcon:g["a"],VList:Be["a"],VListItem:Fe["a"],VListItemContent:$e["a"],VListItemIcon:We["a"],VListItemSubtitle:$e["b"],VListItemTitle:$e["c"],VRow:A["a"],VSpacer:Q["a"],VTab:Z["a"],VTabs:te["a"]});var Se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",[a("v-col",[a("v-card",[a("v-card-title",[e._v(" "+e._s(e.issue.title)+" "),a("v-chip",{staticClass:"ml-4",attrs:{color:e.getTag(e.issue.tag).color,"text-color":"white"}},[e._v(e._s(e.getTag(e.issue.tag).text))])],1),a("v-card-text",[e._v(e._s(e.issue.content))]),a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"3"}},[a("v-label",[e._v("标识：")]),a("v-label",[e._v(e._s(e.getLine(e.issue.line).text))])],1),a("v-col",{attrs:{cols:"3"}},[a("v-label",[e._v("位置：")]),a("v-label",[e._v(e._s(e.issue.project_index))])],1)],1),a("v-row",[a("v-col",{attrs:{cols:"3"}},[a("v-label",[e._v("问题优先级：")]),a("v-chip",{attrs:{color:e.getPriority(e.issue.priority).color,"text-color":"white"}},[e._v(e._s(e.getPriority(e.issue.priority).text))])],1),a("v-col",{attrs:{cols:"3"}},[a("v-label",[e._v("问题状态：")]),a("v-chip",[a("v-icon",{attrs:{left:""}},[e._v(e._s(e.getStatus(e.issue.status).icon))]),e._v(" "+e._s(e.getStatus(e.issue.status).text)+" ")],1)],1),a("v-col",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.edit=!0}}},[e._v("更新")])],1)],1),e.issue.comment?a("v-row",[a("v-card-text",{staticClass:"txt-subtitle"},[e._v("备注")]),a("v-spacer"),a("v-card-text",[e._v(e._s(e.issue.comment))])],1):e._e()],1),e.issue.files?a("v-card-text",{staticClass:"txt-subtitle-image"},[e._v("图片")]):e._e(),e._l(e.issue.files,(function(t){return[a("v-img",{key:t,staticClass:"mb-2",attrs:{src:e.imageUrl(t)}})]}))],2)],1)],1),a("v-dialog",{attrs:{width:"600px"},model:{value:e.alert,callback:function(t){e.alert=t},expression:"alert"}},[a("v-card",[a("v-card-title",{staticClass:"subtitle"},[e._v("注意")]),a("v-card-text",[e._v(e._s(e.alertMessage))]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"red"},on:{click:function(t){e.alert=!1,e.alertMessage=""}}},[e._v("确定")])],1)],1)],1),a("v-dialog",{attrs:{width:"600px",persistent:""},model:{value:e.edit,callback:function(t){e.edit=t},expression:"edit"}},[a("v-card",[a("v-card-title",{staticClass:"subtitle"},[e._v("编辑")]),a("v-card-text",[a("v-form",[a("v-select",{attrs:{label:"优先级",items:e.priorityItems},model:{value:e.issueNewPriority,callback:function(t){e.issueNewPriority=t},expression:"issueNewPriority"}}),a("v-select",{attrs:{label:"问题状态",items:e.statusItems},model:{value:e.issueNewStatus,callback:function(t){e.issueNewStatus=t},expression:"issueNewStatus"}}),a("v-textarea",{attrs:{label:"问题备注"},model:{value:e.issueNewComment,callback:function(t){e.issueNewComment=t},expression:"issueNewComment"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:""},on:{click:function(t){e.edit=!1}}},[e._v("取消")]),a("v-btn",{attrs:{text:"",color:"green"},on:{click:function(t){return e.onUpdateClick()}}},[e._v("更新")])],1)],1)],1)],1)},Re=[],De={data:function(){return{loaded:!1,alert:!1,alertMessage:"",priorityItems:[{text:"低",value:"0",color:"blue"},{text:"普通",value:"1",color:"yellow"},{text:"高",value:"2",color:"orange"},{text:"紧急",value:"3",color:"red"}],statusItems:[{text:"未解决",value:0,icon:"mdi-close"},{text:"关闭",value:1,icon:"mdi-check"},{text:"疑问",value:2,icon:"mdi-help"}],tagItems:[{text:"尼尔人工生命",value:"nier",color:"blue"},{text:"九怨",value:"kuon",color:"red"}],lineItems:[{text:"TALK_A",value:"TA"},{text:"TALK_B",value:"TB"},{text:"TALK_C",value:"TC"},{text:"TALK_COMMON",value:"TCOMM"},{text:"TALK_D",value:"TD"},{text:"RADIO_A",value:"RA"},{text:"RADIO_B",value:"RB"},{text:"INFOWINDOW",value:"INFO"},{text:"CAPTION",value:"CAP"},{text:"EVENT",value:"EVENT"},{text:"FMG",value:"FMG"}],issue:"",edit:!1,issueNewPriority:0,issueNewStatus:0,issueNewComment:""}},computed:{imageUrl:function(){return function(e){if(e)return"/file/image/"+e}},getPriority:function(){return function(e){var t=this.priorityItems.find((function(t){return t.value===e}));return t}},getStatus:function(){return function(e){var t=this.statusItems.find((function(t){return t.value===e}));return t}},getTag:function(){return function(e){var t=this.tagItems.find((function(t){return t.value===e}));return t}},getLine:function(){return function(e){var t=this.lineItems.find((function(t){return t.value===e}));return t}}},created:function(){this.init()},mounted:function(){this.$store.commit("setCanGoBack",!0)},methods:{init:function(){var e=this;this.$api.getIssue(this.$route.params.id).then((function(t){0===t.code&&(e.issue=t.data,e.issue.files&&(e.issue.files=e.issue.files.split(",")),e.issueNewPriority=e.issue.priority,e.issueNewStatus=e.issue.status)}))},onUpdateClick:function(){var e=this;this.$api.updateIssue(this.issue.id,this.issueNewPriority,this.issueNewStatus,this.issueNewComment).then((function(t){0===t.code?(e.alertMessage="更新成功",e.alert=!0,e.edit=!1,e.issue.priority=e.issueNewPriority,e.issue.status=e.issueNewStatus,e.issue.comment=e.issueNewComment):(e.alertMessage="更新失败",e.alert=!0,e.edit=!1)})).catch((function(){e.alertMessage="更新失败",e.alert=!0,e.edit=!1}))}}},Ge=De,Ke=(a("cdcf"),a("cc20")),Je=a("24c9"),qe=Object(d["a"])(Ge,Se,Re,!1,null,"4701433e",null),Ue=qe.exports;v()(qe,{VBtn:f["a"],VCard:M["a"],VCardActions:P["a"],VCardText:P["c"],VCardTitle:P["d"],VChip:Ke["a"],VCol:N["a"],VContainer:z["a"],VDialog:q["a"],VForm:Ve["a"],VIcon:g["a"],VImg:b["a"],VLabel:Je["a"],VRow:A["a"],VSelect:H["a"],VSpacer:Q["a"],VTextarea:re["a"]});var He=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",[a("v-card",[a("v-card-title",[e._v("重复消除")]),a("v-card-text",[a("v-file-input",{attrs:{label:"原始工程"},on:{change:e.fileInputchange}}),a("v-file-input",{attrs:{label:"比较用"},on:{change:e.fileInputchange}}),a("v-btn",{staticClass:"ml-2",attrs:{color:"primary",disabled:2!==e.projects.length||e.loaded},on:{click:e.compareProject}},[e._v("比较")]),a("v-btn",{staticClass:"ml-2",attrs:{color:"success",disabled:!e.canSave},on:{click:e.saveProject}},[e._v("导出")])],1)],1)],1)],1),e.loaded&&0!==e.compareListItems.length?a("v-row",{attrs:{id:"work-row"}},[a("v-col",[a("v-card",[a("v-card-subtitle",[e._v("共有 "+e._s(e.compareListItems.length)+" 处相同")]),a("v-card-text",[a("v-btn",{attrs:{text:""},on:{click:function(t){return e.comfirmAll()}}},[e._v("全部采用B")]),a("v-pagination",{attrs:{length:e.pageLength,"total-visible":"10",circle:""},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}}),e._l(e.pageItem,(function(t){return a("div",{key:t.Id},[a("v-row",{attrs:{"no-gutters":"",dense:""}},[a("v-col",{attrs:{cols:"4"}},[a("span",[e._v("A:#"+e._s(t.AId))])]),a("v-col",{attrs:{cols:"4"}},[a("span",[e._v("B:#"+e._s(t.BId))])])],1),a("v-row",[a("v-col",{attrs:{cols:"2"}},[a("v-textarea",{attrs:{label:"原文",readonly:"","no-resize":"",value:t.AText}})],1),a("v-col",{attrs:{cols:"2"}},[a("v-textarea",{attrs:{label:"翻译A",readonly:"","no-resize":"",value:t.ATranslated}})],1),a("v-col",{attrs:{cols:"2"}},[a("v-textarea",{attrs:{label:"原文B",readonly:"","no-resize":"",value:t.BText}})],1),a("v-col",{attrs:{cols:"2"}},[a("v-textarea",{attrs:{label:"翻译B",readonly:"","no-resize":"",value:t.BTranslated}})],1),a("v-col",{attrs:{cols:"3"}},[a("v-textarea",{attrs:{label:"校正","no-resize":""},model:{value:t.CTranslated,callback:function(a){e.$set(t,"CTranslated",a)},expression:"item.CTranslated"}})],1)],1),a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"2"}}),a("v-col",{attrs:{cols:"2"}},[a("v-btn",{attrs:{text:""},on:{click:function(a){return e.comfirmChange("A",t)}}},[e._v("↑ 采用A")])],1),a("v-col",{attrs:{cols:"2"}}),a("v-col",{attrs:{cols:"2"}},[a("v-btn",{attrs:{text:""},on:{click:function(a){return e.comfirmChange("B",t)}}},[e._v("↑ 采用B")])],1),a("v-col",{attrs:{cols:"3"}},[a("v-btn",{attrs:{text:""},on:{click:function(a){return e.comfirmChange("C",t)}}},[e._v("↑ 采用校正")])],1)],1)],1)})),a("v-pagination",{attrs:{length:e.pageLength,"total-visible":"10",circle:""},on:{input:function(t){return e.$vuetify.goTo("#work-row")}},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],2)],1)],1)],1):e._e(),a("v-dialog",{attrs:{width:"600px"},model:{value:e.alert,callback:function(t){e.alert=t},expression:"alert"}},[a("v-card",[a("v-card-title",{staticClass:"subtitle"},[e._v("注意")]),a("v-card-text",[e._v(e._s(e.alertMessage))]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"red"},on:{click:function(t){e.alert=!1,e.alertMessage=""}}},[e._v("确定")])],1)],1)],1)],1)},Xe=[],Qe={data:function(){return{loaded:!1,alert:!1,alertMessage:"",projects:[],compareListItems:[],originalFilename:"",page:1,size:50}},computed:{canSave:function(){return!!this.loaded},pageItem:function(){return this.compareListItems.slice((this.page-1)*this.size,(this.page-1)*this.size+this.size)},pageLength:function(){return Math.ceil(this.compareListItems.length/this.size)}},mounted:function(){this.$store.commit("setCanGoBack",!0)},methods:{fileInputchange:function(e){if(""!==e){var t=this,a=new FileReader;a.onload=function(a){var s=a.target.result;if(s){var r=JSON.parse(s);if(!r)return t.alertMessage="文件不是翻译工程文件！",void(t.alert=!0);if(!E.checkProject(r.spec))return t.alertMessage="文件不是翻译工程文件！",void(t.alert=!0);0===t.projects.length&&(t.originalFilename=e.name),t.projects.push(r)}},a.readAsText(e,"utf-8")}},compareProject:function(){var e=this.projects[0];"INW"===e.spec&&(this.alert=!0,this.alertMessage="不支持INFO文件");var t=this.projects[1],a=e.list,s=t.list;for(var r in a){var i=a[r].Text;for(var n in s)if(i===s[n].Text){this.compareListItems.push({AId:a[r].Id,AText:a[r].Text,ATranslated:a[r].Translated,BId:s[n].Id,BText:s[n].Text,BTranslated:s[n].Translated});break}}this.loaded=!0},comfirmChange:function(e,t){"A"===e||("B"===e?this.projects[0].list[t.AId].Translated=t.BTranslated:"C"===e?this.projects[0].list[t.AId].Translated=t.CTranslated:(this.alert=!0,this.alertMessage="你做了什么？")),this.compareListItems.splice(this.compareListItems.indexOf(t),1)},comfirmAll:function(){for(var e in this.compareListItems){var t=this.compareListItems[e];this.projects[0].list[t.AId].Translated=t.BTranslated}this.compareListItems=[]},saveProject:function(){R.a.saveAs(E.objectToBlob(this.projects[0]),this.originalFilename)}}},Ye=Qe,Ze=Object(d["a"])(Ye,He,Xe,!1,null,null,null),et=Ze.exports;v()(Ze,{VBtn:f["a"],VCard:M["a"],VCardActions:P["a"],VCardSubtitle:P["b"],VCardText:P["c"],VCardTitle:P["d"],VCol:N["a"],VContainer:z["a"],VDialog:q["a"],VFileInput:ue["a"],VPagination:U["a"],VRow:A["a"],VSpacer:Q["a"],VTextarea:re["a"]});var tt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",[a("v-col",[a("v-card",{staticClass:"d-block"},[a("v-tabs",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tab",[e._v("文件")]),e.loaded?a("v-tab",[e._v("页面")]):e._e(),e.loaded?a("v-tab",[e._v("搜索")]):e._e(),e.loaded?a("v-tab",[e._v("其他")]):e._e()],1),a("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tab-item",[a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("input",{attrs:{id:"file-input",type:"file",hidden:""}}),a("v-btn",{attrs:{color:"primary"},on:{click:e.loadProject}},[e._v(e._s(e.openText))]),a("v-btn",{staticClass:"ml-2",attrs:{color:"success",disabled:!e.loaded},on:{click:e.saveProject}},[e._v("保存")]),e.loaded?[a("span",{staticClass:"ml-4"},[e._v("文件名： "+e._s(e.filename))]),a("span",{staticClass:"ml-2"},[e._v("类型： "+e._s(e.project.spec))]),a("span",{staticClass:"ml-2"},[e._v("标识： "+e._s(e.project.line))]),a("span",{staticClass:"ml-2"},[e._v("总量： "+e._s(e.project.total))]),a("span",{staticClass:"ml-2"},[e._v("已完成： "+e._s(e.progress))])]:[a("span",{staticClass:"ml-4"},[e._v("说明：选择工程文件 *.json。翻译完成后记得保存！")])]],2)],1)],1),e.loaded?a("v-tab-item",[a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("v-row",[a("v-col",[a("v-text-field",{attrs:{type:"text",label:"快速跳转",placeholder:"#1234"},on:{keyup:e.quickJump},model:{value:e.jump,callback:function(t){e.jump=t},expression:"jump"}})],1),a("v-col",[a("v-select",{attrs:{items:e.sizePreset,label:"分页数量"},on:{change:e.sizeChange}})],1)],1)],1)],1)],1):e._e(),e.loaded?a("v-tab-item",[a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("v-row",[a("v-col",[a("v-text-field",{attrs:{type:"text",label:"原文搜索",placeholder:""},on:{keyup:e.search},model:{value:e.searchWord,callback:function(t){e.searchWord=t},expression:"searchWord"}})],1),a("v-col",[a("v-text-field",{attrs:{type:"text",label:"译文搜索",placeholder:""},on:{keyup:e.searchTrans},model:{value:e.searchWordTrans,callback:function(t){e.searchWordTrans=t},expression:"searchWordTrans"}})],1),a("v-col",{attrs:{cols:"2"}},[a("v-switch",{attrs:{label:"模糊搜索"},model:{value:e.searchFuzzy,callback:function(t){e.searchFuzzy=t},expression:"searchFuzzy"}})],1),a("v-col",[a("v-btn",{staticClass:"ml-2 mt-2",attrs:{color:"primary"},on:{click:e.clearSearch}},[e._v("清空")])],1)],1)],1)],1)],1):e._e(),e.loaded?a("v-tab-item",[a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("v-row",[a("v-col",[a("v-switch",{attrs:{label:"自动备份至服务器"},model:{value:e.autoBackup,callback:function(t){e.autoBackup=t},expression:"autoBackup"}})],1),a("v-col",[a("v-switch",{attrs:{label:"消除空行"},model:{value:e.avoidEmptyLine,callback:function(t){e.avoidEmptyLine=t},expression:"avoidEmptyLine"}})],1)],1)],1)],1)],1):e._e()],1)],1)],1)],1),e.loaded?a("v-row",{attrs:{id:"work-row"}},[a("v-col",[a("v-card",[a("v-card-text",[a("v-pagination",{attrs:{length:e.pageLength,"total-visible":"10",circle:""},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}}),e._l(e.pageItem,(function(t){return a("div",{key:t.Id},[a("v-row",{attrs:{"no-gutters":"",id:"item-"+t.Id}},[a("v-col",[a("span",[e._v("#"+e._s(t.Id))])])],1),a("v-row",[a("v-col",{attrs:{cols:"3"}},[a("v-textarea",{attrs:{label:"日",readonly:"","no-resize":""},model:{value:t.JpText,callback:function(a){e.$set(t,"JpText",a)},expression:"item.JpText"}})],1),a("v-col",{attrs:{cols:"3"}},[a("v-textarea",{attrs:{label:"简体",readonly:"","no-resize":""},model:{value:t.ChsText,callback:function(a){e.$set(t,"ChsText",a)},expression:"item.ChsText"}})],1),a("v-col",{attrs:{cols:"3"}},[a("v-textarea",{attrs:{label:"繁体",readonly:"","no-resize":""},model:{value:t.ChtText,callback:function(a){e.$set(t,"ChtText",a)},expression:"item.ChtText"}})],1),a("v-col",{attrs:{cols:"3"}},[a("v-textarea",{attrs:{label:"注释"},model:{value:t.Comment,callback:function(a){e.$set(t,"Comment",a)},expression:"item.Comment"}})],1)],1)],1)})),a("v-pagination",{attrs:{length:e.pageLength,"total-visible":"10",circle:""},on:{input:function(t){return e.$vuetify.goTo("#work-row")}},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],2)],1)],1)],1):e._e(),a("v-dialog",{attrs:{width:"600px"},model:{value:e.alert,callback:function(t){e.alert=t},expression:"alert"}},[a("v-card",[a("v-card-title",{staticClass:"subtitle"},[e._v("注意")]),a("v-card-text",[e._v(e._s(e.alertMessage))]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"red"},on:{click:function(t){e.alert=!1,e.alertMessage=""}}},[e._v("确定")])],1)],1)],1),a("v-snackbar",{attrs:{timeout:e.backupNotifyTimeout},model:{value:e.backupNotify,callback:function(t){e.backupNotify=t},expression:"backupNotify"}},[e._v(" "+e._s(e.backupNotifyMessage)+" "),a("v-btn",{attrs:{color:"blue",text:""},on:{click:function(t){e.backupNotify=!1}}},[e._v("关闭")])],1)],1)},at=[],st={data:function(){return{loaded:!1,filename:"",alert:!1,alertMessage:"",backupNotify:!1,backupNotifyMessage:"",backupNotifyTimeout:2e3,avoidEmptyLine:!0,project:{},extraData:{},tab:0,page:1,sizePreset:[30,50,80,100],size:50,jump:0,total:0,translate:0,autoBackup:!0,autoBackupTimer:{},talkerNameMap:[{id:"1",name:"黑之书"},{id:"2",name:"尼尔"},{id:"3",name:"尼尔"},{id:"4",name:"尼尔"},{id:"5",name:"悠娜"},{id:"6",name:"悠娜"},{id:"7",name:"悠娜"},{id:"8",name:"村民"},{id:"9",name:"卫兵"},{id:"10",name:"道具店"},{id:"11",name:"材料店"},{id:"12",name:"花店"},{id:"13",name:"食品店"},{id:"14",name:"武器店"},{id:"15",name:"渔具店"},{id:"16",name:"酒馆"},{id:"17",name:"村民"},{id:"18",name:"村民"},{id:"19",name:"路人"},{id:"20",name:"鱼店"},{id:"21",name:"占卜师"},{id:"22",name:"村民"},{id:"23",name:"迪瓦菈"},{id:"24",name:"波波菈"},{id:"25",name:"？？？"},{id:"26",name:"白之书"},{id:"27",name:"村长"},{id:"28",name:"凯宁"},{id:"29",name:"魔物"},{id:"30",name:"魔物"},{id:"31",name:"魔物"},{id:"32",name:"魔物"},{id:"33",name:"魔物"},{id:"34",name:"管家"},{id:"35",name:"艾米尔"},{id:"36",name:"弟弟"},{id:"37",name:"弟弟"},{id:"38",name:"兄长"},{id:"39",name:"防御系统"},{id:"40",name:"老婆婆"},{id:"41",name:"邮递员"},{id:"42",name:"菲雅"},{id:"43",name:"面具副官"},{id:"44",name:"面具王子"},{id:"45",name:"面具之王"},{id:"46",name:"面具的住民"},{id:"47",name:"面具士兵"},{id:"48",name:"奇怪的商店"},{id:"49",name:"面具食材店"},{id:"50",name:"面具材料店"},{id:"51",name:"面具武器店"},{id:"52",name:"面具道具店"},{id:"53",name:"男村民"},{id:"54",name:"女村民"},{id:"55",name:"魔物小孩"},{id:"56",name:"魔物母亲"},{id:"57",name:"Ｐ３３"},{id:"58",name:"杜兰"},{id:"59",name:"格雷特"},{id:"60",name:"狼头领"},{id:"61",name:"狼"},{id:"62",name:"狼崽"},{id:"63",name:"幼犬"},{id:"64",name:"老人"},{id:"65",name:"姐姐"},{id:"66",name:"小鸟"},{id:"67",name:"魔王"},{id:"68",name:"迪瓦菈・波波菈"},{id:"69",name:"盗贼"},{id:"70",name:"选项"},{id:"71",name:"小孩"},{id:"72",name:"面具小孩"},{id:"73",name:"邮局工作人员"},{id:"74",name:"村民"},{id:"108",name:"村民"},{id:"110",name:"道具店"},{id:"111",name:"材料店"},{id:"112",name:"花店"},{id:"113",name:"食品店"},{id:"114",name:"武器店"},{id:"115",name:"渔具店"},{id:"116",name:"酒馆"},{id:"118",name:"村民"},{id:"119",name:"路人"},{id:"120",name:"鱼店"},{id:"127",name:"村长"},{id:"129",name:"魔物"},{id:"132",name:"魔物"},{id:"146",name:"面具住民"},{id:"147",name:"面具士兵"},{id:"149",name:"面具食材店"},{id:"150",name:"面具材料店"},{id:"151",name:"面具武器店"},{id:"152",name:"面具道具店"},{id:"171",name:"小孩"},{id:"172",name:"面具小孩"}],searchWord:"",searchWordTrans:"",searchFlag:!1,searchTransFlag:!1,searchFuzzy:!0}},computed:{openText:function(){return this.loaded?"重新选择":"打开工程"},progress:function(){var e=0;return this.project.list.forEach((function(t){""!==t.Translated&&null!==t.Translated&&e++})),e},displayList:function(){var e=this,t=this.project.list;return this.avoidEmptyLine&&(t="INW"===this.project.spec?t.filter((function(e){return e.Text+e.Text2!==""})):t.filter((function(e){return""!==e.Text}))),this.searchFlag?t="INW"===this.project.spec?t.filter((function(t){return e.searchFuzzy?e.searchWordReg(e.searchWord).test(t.Text.concat(t.Text2)):t.Text.concat(t.Text2).indexOf(e.searchWord)>0})):t.filter((function(t){return e.searchFuzzy?e.searchWordReg(e.searchWord).test(t.Text):t.Text.indexOf(e.searchWord)>0})):this.searchTransFlag&&(t="INW"===this.project.spec?t.filter((function(t){return e.searchFuzzy?e.searchWordReg(e.searchWordTrans).test(t.Translated.concat(t.Translated2)):t.Translated.concat(t.Translated2).indexOf(e.searchWordTrans)>0})):t.filter((function(t){return e.searchFuzzy?e.searchWordReg(e.searchWordTrans).test(t.Translated):t.Translated.indexOf(e.searchWordTrans)>0}))),t},pageItem:function(){return this.displayList.slice((this.page-1)*this.size,(this.page-1)*this.size+this.size)},pageLength:function(){return Math.ceil(this.displayList.length/this.size)},getTalkerName:function(){return function(e){var t;return"TKD"===this.project.spec?(t=this.talkerNameMap.find((function(t){return t.id===e.EntryO})),t?t.name:e.EntryF):"RAW"===this.project.spec?(t=this.talkerNameMap.find((function(t){return t.id===e.EntryK})),t?t.name:e.EntryE):void 0}}},mounted:function(){this.$store.commit("setCanGoBack",!0)},methods:{quickJump:function(e){var t=this;if("Enter"===e.key){if(this.jump>=this.project.total)return this.alert=!0,void(this.alertMessage="超过范围");for(var a=0;a<this.displayList.length;a++)if(this.displayList[a].Id==this.jump)return this.page=Math.ceil((+a+1)/this.size),void this.$nextTick((function(){t.$vuetify.goTo("#item-"+t.jump)}));this.alert=!0,this.alertMessage="超过范围"}},search:function(e){"Enter"===e.key&&(this.searchFlag=!0)},searchTrans:function(e){"Enter"===e.key&&(this.searchTransFlag=!0)},clearSearch:function(){this.searchFlag=!1,this.searchTransFlag=!1},sizeChange:function(e){this.size=e},onTranslatedBlur:function(e,t,a){a?t.Translated2=e.target.value:t.Translated=e.target.value},loadProject:function(){var e=this,t=this,a=document.querySelector("#file-input");a.addEventListener("change",(function(){var s=a.files;if(0===s.length)e.alertMessage="没有选择文件！",e.alert=!0;else if(s.length>1)e.alertMessage="只能选择一个文件！",e.alert=!0;else{var r=s[0];e.filename=r.name;var i=new FileReader;i.onload=function(e){var a=e.target.result;if(a){var s=JSON.parse(a);if(!s)return t.alertMessage="这不是一个翻译工程文件！",void(t.alert=!0);if(!E.checkProject(s.spec))return t.alertMessage="这不是一个翻译工程文件！",void(t.alert=!0);t.project=s,t.checkMode(t.project.spec),t.page=1,t.loaded=!0}},i.readAsText(r,"utf-8")}})),a.click()},checkMode:function(e){"FMG"===e?this.$store.commit("setCurrentMode","kuon"):this.$store.commit("setCurrentMode","nier")},saveProject:function(){var e=this.project;e.translated=this.progress;var t=G()("yyyy-mm-dd_hh-MM-ss");R.a.saveAs(E.objectToBlob(e),this.filename.replace(".json","")+"-"+t+".json")},googleclick:function(e){var t=encodeURI(this.project.list[e].Text),a="https://translate.google.cn/?hl=zh-CN#view=home&op=translate&sl=ja&tl=zh-CN&text=";window.open(a+t)},baiduclick:function(e){var t=encodeURI(this.project.list[e].Text),a="https://fanyi.baidu.com/#jp/zh/";window.open(a+t)},searchWordReg:function(e){return new RegExp("(.*)(".concat(e.split("").join(")(.*)("),")(.*)"),"i")}}},rt=st,it=Object(d["a"])(rt,tt,at,!1,null,null,null),nt=it.exports;v()(it,{VBtn:f["a"],VCard:M["a"],VCardActions:P["a"],VCardText:P["c"],VCardTitle:P["d"],VCol:N["a"],VContainer:z["a"],VDialog:q["a"],VPagination:U["a"],VRow:A["a"],VSelect:H["a"],VSnackbar:X["a"],VSpacer:Q["a"],VSwitch:Y["a"],VTab:Z["a"],VTabItem:ee["a"],VTabs:te["a"],VTabsItems:ae["a"],VTextField:se["a"],VTextarea:re["a"]}),s["default"].use(C["a"]);var ot=[{path:"/",name:"MainPage",component:$},{path:"/trans",name:"TranslatePage",component:ne},{path:"/merge",name:"MergePage",component:me},{path:"/export",name:"ExportPage",component:ye},{path:"/issues",name:"IssuesPage",component:Pe},{path:"/issueList",name:"IssueListPage",component:Ee},{path:"/issueDetail",name:"IssueDetailPage",component:Ue},{path:"/compare",name:"ComparePage",component:et},{path:"/newCompare",name:"NewComparePage",component:nt}],lt=new C["a"]({routes:ot}),ct=lt,dt=a("bc3a"),ut=a.n(dt),vt=(a("d3b7"),a("4328")),mt=a.n(vt),pt="/api/common/check",ft="/api/common/config",ht="/api/nier/backup",gt="/api/nier/export",bt="/api/issue/create",xt="/api/issue/list",Tt="/api/issue/get",kt="/api/issue/update";ut.a.withCredentials=!0,ut.a.interceptors.request.use((function(e){return"application/x-www-form-urlencoded"===e.headers["Content-Type"]?(e.data=mt.a.stringify(e.data),e.headers={"Content-Type":"application/x-www-form-urlencoded"},e):("multipart/form-data"!==e.headers["Content-Type"]&&(e.data=JSON.stringify(e.data),e.headers={"Content-Type":"application/json"}),e)}),(function(e){return Promise.reject(e)})),ut.a.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)}));var _t={checkOnlineService:function(){return new Promise((function(e,t){ut.a.get(pt).then((function(t){return e(t.data)})).catch((function(e){return t(e)}))}))},getConfig:function(){return new Promise((function(e,t){ut.a.get(ft).then((function(t){return e(t.data)})).catch((function(e){return t(e)}))}))},backup:function(e){var t=new FormData;return t.append("file",e),new Promise((function(e,a){ut.a.post(ht,t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){return e(t.data)})).catch((function(e){return a(e)}))}))},export:function(e,t){var a=new FormData;return a.append("file",e),a.append("debug",t.debug),a.append("english",t.english),a.append("lang",t.lang),new Promise((function(e,t){ut.a.post(gt,a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){return e(t)})).catch((function(e){return t(e)}))}))},issueList:function(e,t,a){return new Promise((function(s,r){ut.a.get(xt,{params:{page:e,limit:t,status:a}}).then((function(e){return s(e.data)})).catch((function(e){return r(e)}))}))},getIssue:function(e){return new Promise((function(t,a){ut.a.get(Tt,{params:{id:e}}).then((function(e){return t(e.data)})).catch((function(e){return a(e)}))}))},createIssue:function(e){var t=new FormData;return t.append("title",e.title),t.append("tag",e.tag),t.append("line",e.line),t.append("index",e.index),t.append("content",e.content),t.append("priority",e.priority),e.files.forEach((function(e){return t.append("files",e)})),new Promise((function(e,a){ut.a.post(bt,t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){return e(t.data)})).catch((function(e){return a(e)}))}))},updateIssue:function(e,t,a,s){return new Promise((function(r,i){ut.a.post(kt,{id:e,priority:t,status:a,comment:s},{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){return r(e.data)})).catch((function(e){return i(e)}))}))}};s["default"].config.productionTip=!1,s["default"].prototype.$axios=ut.a,s["default"].prototype.$api=_t,s["default"].prototype.$config={backupInterval:10,clientVersion:5,serverVersion:""},s["default"].use(r["a"]);var yt=new r["a"].Store({state:{currentMode:"nier",canGoBack:!1,editPage:!1},mutations:{setCurrentMode:function(e,t){e.currentMode=t},setCanGoBack:function(e,t){e.canGoBack=t},setEditPage:function(e,t){e.editPage=t}}});new s["default"]({vuetify:y,router:ct,store:yt,render:function(e){return e(k)}}).$mount("#app")},cdcf:function(e,t,a){"use strict";var s=a("d7e0"),r=a.n(s);r.a},d03a:function(e,t,a){e.exports=a.p+"img/header_kuon.9e6911af.jpg"},d7e0:function(e,t,a){}});
//# sourceMappingURL=app.cbbeaf68.js.map